query GetConsumerByAccountNo($accountNo: String!) @auth(level: PUBLIC) {
	consumer(first: { where: { accountNo: { eq: $accountNo } } }) {
		id
		userId
		accountNo
		email
		fullName
		book
		classType
		createdAt
		updatedAt
	}
}

query GetConsumer($id: UUID!) @auth(expr: "auth.token.role == 'admin'") {
	consumer(id: $id) {
		id
		userId
		accountNo
		email
		fullName
		book
		classType
		createdAt
		updatedAt
	}
}

query GetConsumerByUserId($userId: String!) @auth(level: USER) {
	consumer(first: { where: { userId: { eq: $userId } } }) {
		id
		userId
		accountNo
		fullName
		book
		classType
		createdAt
		updatedAt
	}
}

query PaginatedConsumers(
	$limit: Int = 10
	$offset: Int = 0
	$orderByField: String = "accountNo"
	$orderDirection: String = "DESC"
) @auth(expr: "auth.token.role == 'admin'") {
	consumers(limit: $limit, offset: $offset, orderBy: [{ accountNo: ASC }]) {
		id
		accountNo
		fullName
		book
		classType
		createdAt
		updatedAt
	}
}

query SearchConsumers($query: String!)
@auth(expr: "auth.token.role == 'admin'") {
	consumers_search(query: $query) {
		id
		userId
		accountNo
		email
		fullName
		book
		classType
		createdAt
		updatedAt
	}
}

query CountConsumers @auth(expr: "auth.token.role == 'admin'") {
	consumers {
		_count
	}
}
