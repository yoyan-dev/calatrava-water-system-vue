mutation CreateConsumer(
	$accountNo: String!
	$fullName: String!
	$book: String!
	$classType: String!
) @auth(expr: "auth.token.role == 'admin'") {
	consumer_insert(
		data: {
			accountNo: $accountNo
			fullName: $fullName
			book: $book
			classType: $classType
		}
	)
}

mutation UpdateConsumer(
	$id: UUID!
	$userId: String
	$accountNo: String
	$email: String
	$fullName: String
	$book: String
	$classType: String
) @auth(expr: "auth.token.role == 'admin'") {
	consumer_update(
		id: $id
		data: {
			accountNo: $accountNo
			fullName: $fullName
			book: $book
			classType: $classType
			updatedAt_expr: "request.time"
		}
	)
}

mutation UserUpdateConsumer($id: UUID!, $userId: String, $email: String)
@auth(level: USER) {
	consumer_update(
		id: $id
		data: { userId: $userId, email: $email, updatedAt_expr: "request.time" }
	)
}

mutation DeleteConsumer($id: UUID!) @auth(expr: "auth.token.role == 'admin'") {
	consumer_delete(id: $id)
}
